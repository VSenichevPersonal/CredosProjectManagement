# –°—Ç—Ä–∞—Ç–µ–≥–∏—è AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–î–∞—Ç–∞:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**Stage:** 17  
**–•–æ—Å—Ç–∏–Ω–≥:** Railway (–≤—Ä–µ–º–µ–Ω–Ω–æ, –±—ã–ª Vercel)

---

## ü§ñ –¢–ï–ö–£–©–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å:

```typescript
// lib/providers/llm/
‚îú‚îÄ llm-factory.ts
‚îú‚îÄ openai-provider.ts      // gpt-4o
‚îú‚îÄ anthropic-provider.ts   // claude-sonnet-4.5 ‚≠ê
‚îî‚îÄ llm-provider.interface.ts

// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Vercel AI SDK
import { generateText } from "ai"
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –í—ã—è–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –û—Ü–µ–Ω–∫–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –∫–æ–º–ø–ª–∞–µ–Ω—Å
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º

---

## üéØ –í–û–ü–†–û–°: OpenAI Assistant vs API vs Claude 4.5?

### –í–∞—Ä–∏–∞–Ω—Ç 1: **OpenAI API (—Ç–µ–∫—É—â–∞—è)** 

**–ü–ª—é—Å—ã:**
- ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ gpt-4o –±—ã—Å—Ç—Ä—ã–π
- ‚úÖ –•–æ—Ä–æ—à–∏–π –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
- ‚úÖ –î–µ—à–µ–≤–ª–µ Assistant API

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ö–æ–Ω—Ç–µ–∫—Å—Ç: 128K —Ç–æ–∫–µ–Ω–æ–≤
- ‚ùå –ù—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚ùå –ù–µ—Ç –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏
- ‚ùå –î–æ—Ä–æ–∂–µ Claude –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- gpt-4o: $5/1M input, $15/1M output
- –î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ 50 —Å—Ç—Ä–∞–Ω–∏—Ü (~30K —Ç–æ–∫–µ–Ω–æ–≤): $0.15-0.45

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: **OpenAI Assistant API**

**–ü–ª—é—Å—ã:**
- ‚úÖ –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–º–æ–∂–Ω–æ –æ–±—É—á–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö)
- ‚úÖ –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å
- ‚úÖ Function calling
- ‚úÖ Code interpreter
- ‚úÖ File retrieval (–∑–∞–≥—Ä—É–∑–∫–∞ .docx/.pdf)

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –î–æ—Ä–æ–∂–µ –æ–±—ã—á–Ω–æ–≥–æ API
- ‚ùå –ù—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Assistant
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- –ë–∞–∑–æ–≤–∞—è + retrieval: $0.20/GB/–¥–µ–Ω—å —Ö—Ä–∞–Ω–µ–Ω–∏—è
- –î–ª—è –±–∞–∑—ã –∏–∑ 100 —à–∞–±–ª–æ–Ω–æ–≤: ~$6/–º–µ—Å—è—Ü

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```typescript
// –°–æ–∑–¥–∞—Ç—å Assistant –æ–¥–∏–Ω —Ä–∞–∑
const assistant = await openai.beta.assistants.create({
  name: "IB Compliance Document Generator",
  instructions: `
    –¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º—É –ò–ë-–∫–æ–º–ø–ª–∞–µ–Ω—Å—É.
    –£ —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —à–∞–±–ª–æ–Ω–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è:
    - 187-–§–ó (–ö–ò–ò)
    - 152-–§–ó (–ü–î–Ω)
    - –ü—Ä–∏–∫–∞–∑—ã –§–°–¢–≠–ö ‚Ññ17, ‚Ññ21
    
    –ì–µ–Ω–µ—Ä–∏—Ä—É–π –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å—Ç—Ä–æ–≥–æ –ø–æ —Ä–æ—Å—Å–∏–π—Å–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.
  `,
  model: "gpt-4o",
  tools: [{ type: "retrieval" }],  // –î–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º
  file_ids: [—à–∞–±–ª–æ–Ω—ã_file_ids]
})

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
const thread = await openai.beta.threads.create()
await openai.beta.threads.messages.create(thread.id, {
  role: "user",
  content: "–°–æ–∑–¥–∞–π –ü–æ–ª–∏—Ç–∏–∫—É –ò–ë –¥–ª—è –ê–û –©—ë–∫–∏–Ω–æ–∞–∑–æ—Ç (–ö–ò–ò –∫–∞—Ç–µ–≥–æ—Ä–∏—è 2)"
})
const run = await openai.beta.threads.runs.create(thread.id, {
  assistant_id: assistant.id
})
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: **Claude 4.5 Sonnet (1M —Ç–æ–∫–µ–Ω–æ–≤!)** ‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–Æ

**–ü–ª—é—Å—ã:**
- ‚úÖ **1M —Ç–æ–∫–µ–Ω–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞!** üî•
- ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –í–°–ï —à–∞–±–ª–æ–Ω—ã —Å—Ä–∞–∑—É (100+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –≤—ã—à–µ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –õ—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ –î–µ—à–µ–≤–ª–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù–µ—Ç vector store (–Ω–æ –Ω–µ –Ω—É–∂–µ–Ω —Å 1M!)
- ‚ùå –ù–µ—Ç code interpreter
- ‚ùå –ß—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ gpt-4o

**–°—Ç–æ–∏–º–æ—Å—Ç—å:**
- Claude Sonnet 4.5: $3/1M input, $15/1M output
- –î–ª—è 100 —à–∞–±–ª–æ–Ω–æ–≤ (500K —Ç–æ–∫–µ–Ω–æ–≤): $1.50 input
- **–î–ï–®–ï–í–õ–ï** —á–µ–º gpt-4o –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤!

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```typescript
const { generateText } = await import("ai")

// –ü–µ—Ä–µ–¥–∞–µ–º –í–°–ï —à–∞–±–ª–æ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
const allTemplates = await loadAllTemplates()  // 100+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
const templatesContext = allTemplates.map(t => 
  `[${t.code}] ${t.title}\n${t.content}`
).join('\n\n---\n\n')

const { text } = await generateText({
  model: 'anthropic/claude-sonnet-4.5',
  prompt: `
    –¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º—É –ò–ë-–∫–æ–º–ø–ª–∞–µ–Ω—Å—É.
    
    –ö–û–ù–¢–ï–ö–°–¢: –£ —Ç–µ–±—è –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
    ${templatesContext}  // ‚≠ê –í–°–ï 100 —à–∞–±–ª–æ–Ω–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ!
    
    –ó–ê–î–ê–ß–ê: –°–æ–∑–¥–∞–π –ü–æ–ª–∏—Ç–∏–∫—É –ò–ë –¥–ª—è:
    - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: –ê–û –©—ë–∫–∏–Ω–æ–∞–∑–æ—Ç
    - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ö–ò–ò: 2
    - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞: –•–∏–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
    - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: 187-–§–ó, –§–°–¢–≠–ö ‚Ññ239
    
    –ò—Å–ø–æ–ª—å–∑—É–π —à–∞–±–ª–æ–Ω [policy-ib] –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é.
  `,
  temperature: 0.3,
  maxTokens: 4096
})
```

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### ‚úÖ **Claude 4.5 Sonnet –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**

**–ü—Ä–∏—á–∏–Ω—ã:**

1. **1M —Ç–æ–∫–µ–Ω–æ–≤ = –º–æ–∂–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å:**
   - –í—Å–µ 100+ —à–∞–±–ª–æ–Ω–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –í—Å–µ –ù–ü–ê (187-–§–ó, 152-–§–ó, –ø—Ä–∏–∫–∞–∑—ã –§–°–¢–≠–ö)
   - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - **–í –û–î–ù–û–ú –∑–∞–ø—Ä–æ—Å–µ!**

2. **–°—Ç–æ–∏–º–æ—Å—Ç—å:**
   - Input: $3/1M (–¥–µ—à–µ–≤–ª–µ gpt-4o –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤)
   - Output: $15/1M (–∫–∞–∫ gpt-4o)
   - –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞: $0.50-1.00

3. **–ö–∞—á–µ—Å—Ç–≤–æ:**
   - –õ—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
   - –õ—É—á—à–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç
   - –õ—É—á—à–µ —Å–ª–µ–¥—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

4. **–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!**
   - anthropic-provider.ts –≥–æ—Ç–æ–≤
   - claude-sonnet-4.5 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –ß–µ—Ä–µ–∑ Vercel AI SDK

---

### ‚úÖ **OpenAI gpt-4o –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤**

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:**
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π (diff analysis)
- –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- –ö–æ—Ä–æ—Ç–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ë—ã—Å—Ç—Ä–µ–µ Claude
- –î–µ—à–µ–≤–ª–µ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

---

### ‚ùå **OpenAI Assistant - –ù–ï –ù–£–ñ–ï–ù**

**–ü—Ä–∏—á–∏–Ω–∞:** –° Claude 4.5 (1M —Ç–æ–∫–µ–Ω–æ–≤) –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ä–∞–∑—É. Vector store –Ω–µ –Ω—É–∂–µ–Ω!

**–≠–∫–æ–Ω–æ–º–∏—è:**
- –ù–µ –ø–ª–∞—Ç–∏–º –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ ($6/–º–µ—Å)
- –ü—Ä–æ—â–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ thread/run/poll

---

## üìã –°–¢–†–ê–¢–ï–ì–ò–Ø –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:**

```typescript
// services/document-generation-service.ts

class DocumentGenerationService {
  async generateFromTemplate(
    templateId: string,
    organizationId: string,
    customizations: any
  ) {
    // 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –í–°–ï —à–∞–±–ª–æ–Ω—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    const allTemplates = await this.loadAllTemplates()
    
    // 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –ù–ü–ê –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    const regulations = await this.loadRegulations()
    
    // 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
    const org = await this.getOrganization(organizationId)
    
    // 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Claude 4.5 —Å –ü–û–õ–ù–´–ú –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    const llm = LLMFactory.create('anthropic', 'claude-sonnet-4.5')
    
    const result = await llm.generateDocument({
      template: currentTemplate,
      allTemplates,  // –î–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤
      regulations,   // –î–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
      organization: org,
      customizations
    })
    
    return result
  }
}
```

### **–ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

```typescript
// –ë—ã—Å—Ç—Ä—ã–π diff - –∏—Å–ø–æ–ª—å–∑—É–µ–º gpt-4o
const llm = LLMFactory.create('openai', 'gpt-4o')
const diff = await llm.analyzeDocumentChanges(...)

// –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ - –∏—Å–ø–æ–ª—å–∑—É–µ–º Claude
const llm = LLMFactory.create('anthropic', 'claude-sonnet-4.5')
const analysis = await llm.deepAnalyze(...)
```

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# AI Providers (—á–µ—Ä–µ–∑ Vercel AI SDK)
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=info  # trace | debug | info | warn | error

# Railway (–Ω–æ–≤—ã–π —Ö–æ—Å—Ç–∏–Ω–≥)
RAILWAY_ENVIRONMENT=production
RAILWAY_PROJECT_ID=...

# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
DEFAULT_LLM_PROVIDER=anthropic  # anthropic | openai
DEFAULT_LLM_MODEL=claude-sonnet-4.5  # –∏–ª–∏ gpt-4o

# –õ–∏–º–∏—Ç—ã
MAX_TOKENS_PER_REQUEST=8192
DOCUMENT_GENERATION_TIMEOUT_MS=60000
```

---

## üöÄ –ü–õ–ê–ù –í–ù–ï–î–†–ï–ù–ò–Ø (Stage 17)

### –§–∞–∑–∞ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (1 –¥–µ–Ω—å)

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   # .env.local
   ANTHROPIC_API_KEY=sk-ant-...
   DEFAULT_LLM_PROVIDER=anthropic
   LOG_LEVEL=info
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å llm-factory:**
   ```typescript
   static getDefault() {
     const provider = process.env.DEFAULT_LLM_PROVIDER || 'anthropic'
     const model = process.env.DEFAULT_LLM_MODEL || 'claude-sonnet-4.5'
     return this.create(provider, model)
   }
   ```

3. **–°–æ–∑–¥–∞—Ç—å DocumentGenerationService**

---

### –§–∞–∑–∞ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (2-3 –¥–Ω—è)

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
   - –í—Å–µ —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –ù–ü–ê –∏ —Ä–µ–≥—É–ª—è—Ü–∏–∏
   - –ü—Ä–∏–º–µ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

2. **–ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥:**
   - –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∫–æ–º–ø–ª–∞–µ–Ω—Å–∞
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

3. **UI:**
   - –ö–Ω–æ–ø–∫–∞ "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —à–∞–±–ª–æ–Ω–∞"
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

---

### –§–∞–∑–∞ 3: –£–º–Ω—ã–µ —Ñ–∏—á–∏ (1-2 –¥–Ω—è)

1. **Auto-fill –ø–æ–ª–µ–π:**
   - –ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å –¥–∞—Ç—É
   - –ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–æ–∫ –Ω–∞ –ù–ü–ê
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤

3. **–ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ù–ü–ê
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–µ–π
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Claude 4.5 Sonnet**

**–î–ª—è:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤
- –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ù–ü–ê
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```typescript
const llm = LLMFactory.create('anthropic', 'claude-sonnet-4.5')

// –ó–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï —à–∞–±–ª–æ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç (1M —Ç–æ–∫–µ–Ω–æ–≤!)
const context = {
  templates: allTemplates,      // 100+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  regulations: allRegulations,   // 187-–§–ó, 152-–§–ó, –ø—Ä–∏–∫–∞–∑—ã
  examples: filledDocuments,     // –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
  organization: orgData          // –î–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
}

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º
const document = await llm.generate({ context, task: '...' })
```

### ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å OpenAI gpt-4o**

**–î–ª—è:**
- –ë—ã—Å—Ç—Ä—ã–π diff –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
- –ö–æ—Ä–æ—Ç–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- Real-time –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ UI

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï

| –ö—Ä–∏—Ç–µ—Ä–∏–π | OpenAI gpt-4o | OpenAI Assistant | Claude 4.5 |
|----------|---------------|------------------|------------|
| **–ö–æ–Ω—Ç–µ–∫—Å—Ç** | 128K | 128K + retrieval | **1M** üî• |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | ‚ö°‚ö°‚ö° –ë—ã—Å—Ç—Ä–æ | ‚ö° –ú–µ–¥–ª–µ–Ω–Ω–æ | ‚ö°‚ö° –°—Ä–µ–¥–Ω–µ |
| **–ö–∞—á–µ—Å—Ç–≤–æ (RU)** | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | $5+$15/1M | $5+$15/1M + storage | **$3+$15/1M** üí∞ |
| **–î–ª–∏–Ω–Ω—ã–µ –¥–æ–∫-—Ç—ã** | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **–£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ** | ‚úÖ | ‚ùå | ‚úÖ |

**–í—ã–≤–æ–¥:** **Claude 4.5 Sonnet** - –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤! ‚≠ê

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### **–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**

```typescript
// 1. –î–ª—è –ì–ï–ù–ï–†–ê–¶–ò–ò –∏ –ì–õ–£–ë–û–ö–û–ì–û –ê–ù–ê–õ–ò–ó–ê
const documentLLM = LLMFactory.create('anthropic', 'claude-sonnet-4.5')

// 2. –î–ª—è –ë–´–°–¢–†–´–• –ü–†–û–í–ï–†–û–ö
const quickLLM = LLMFactory.create('openai', 'gpt-4o')
```

### **OpenAI Assistant –ù–ï –ù–£–ñ–ï–ù:**
- Claude —Å 1M —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
- –î–µ—à–µ–≤–ª–µ
- –ü—Ä–æ—â–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –ù–µ—Ç –∑–∞—Ç—Ä–∞—Ç –Ω–∞ storage

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ê

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env):

```bash
# AI Providers
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...

# Defaults
DEFAULT_LLM_PROVIDER=anthropic
DEFAULT_DOCUMENT_LLM_MODEL=claude-sonnet-4.5
DEFAULT_QUICK_LLM_MODEL=gpt-4o

# Logging
LOG_LEVEL=info  # trace, debug, info, warn, error

# Railway
RAILWAY_ENVIRONMENT=production
DATABASE_URL=postgresql://...
```

### 2. –õ–æ–≥–≥–µ—Ä —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω! ‚úÖ

```typescript
// lib/logger.ts
private minLevel: LogLevel = (
  typeof window === "undefined" 
    ? (process.env.LOG_LEVEL as LogLevel) || "trace" 
    : "trace"
)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
logger.info("Document generated", { documentId, model: 'claude-4.5' })
logger.debug("Prompt", { prompt })  // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ LOG_LEVEL=debug
logger.error("Generation failed", error)
```

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°:

1. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å ANTHROPIC_API_KEY** –≤ Railway env
2. ‚úÖ **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å LOG_LEVEL=info** (–¥–ª—è production)
3. ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Claude –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:**
   ```typescript
   const llm = LLMFactory.create('anthropic')  // claude-sonnet-4.5
   ```

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –≤ Stage 17:

1. DocumentGenerationService —Å Claude
2. –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. UI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–∞—Ö

---

**–ù–∞—á–∏–Ω–∞–µ–º —Å Claude 4.5?** üöÄ

