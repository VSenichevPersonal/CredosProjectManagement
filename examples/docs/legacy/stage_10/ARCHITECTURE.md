# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ IB Compliance Platform

## üèóÔ∏è –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Frontend**: Next.js 15 (App Router), React 19, TypeScript
- **UI**: Tailwind CSS v4, shadcn/ui, Radix UI
- **Backend**: Next.js API Routes, Server Actions
- **Database**: Supabase (PostgreSQL)
- **Auth**: Supabase Auth
- **State**: React Context API, SWR –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

\`\`\`
‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/             # –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å layout
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/              # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tenant/         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–Ω–∞–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ system/         # –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (super_admin)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ compliance/         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–∞–µ–Ω—Å–æ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ requirements/       # –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ organizations/      # –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents/          # –î–æ–∫—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ evidence/           # –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controls/           # –ú–µ—Ä—ã –∑–∞—â–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics/          # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ api/                    # API Routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ compliance/         # CRUD –¥–ª—è –∫–æ–º–ø–ª–∞–µ–Ω—Å–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ requirements/       # CRUD –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ organizations/      # CRUD –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents/          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ evidence/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controls/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/              # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ API
‚îÇ   ‚îî‚îÄ‚îÄ auth/                   # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ components/                  # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ admin/                  # –ê–¥–º–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ compliance/             # –ö–æ–º–ø–ª–∞–µ–Ω—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ requirements/           # –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ organizations/          # –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ documents/              # –î–æ–∫—É–º–µ–Ω—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ evidence/               # –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ controls/               # –ú–µ—Ä—ã –∑–∞—â–∏—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ analytics/              # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ layout/                 # Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ui/                     # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ lib/                        # –£—Ç–∏–ª–∏—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ context/               # Execution Context (tenant, user, org)
‚îÇ   ‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ supabase/              # Supabase –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth/                  # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ validators/            # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ providers/                  # Data Providers
‚îÇ   ‚îú‚îÄ‚îÄ database-provider.ts   # –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ supabase-provider.ts   # Supabase —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ types/                      # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ domain/                # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ dto/                   # Data Transfer Objects
‚îú‚îÄ‚îÄ scripts/                    # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ docs/                       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
\`\`\`

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–ª–æ–∏

### 1. **Presentation Layer** (UI)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `components/`
- **–°—Ç—Ä–∞–Ω–∏—Ü—ã**: Next.js —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ `app/(dashboard)/`
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

### 2. **API Layer** (Backend)
- **API Routes**: REST API –≤ `app/api/`
- **Server Actions**: –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤, –≤–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

### 3. **Service Layer** (Business Logic)
- **–°–µ—Ä–≤–∏—Å—ã**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ `lib/services/`
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### 4. **Data Access Layer** (Providers)
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã**: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ë–î –≤ `providers/`
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–∞–≥–∏–Ω–∞—Ü–∏—è

### 5. **Database Layer**
- **Supabase**: PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, RLS –ø–æ–ª–∏—Ç–∏–∫–∏

## üîê –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Tenant Isolation**: –ö–∞–∂–¥—ã–π tenant –∏–º–µ–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **ExecutionContext**: –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å `tenantId`, `userId`, `organizationId`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `tenant_id`

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. **ExecutionContext** (`lib/context/execution-context.ts`)
   - –•—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: tenant, user, organization
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö API routes –∏ Server Actions

2. **TenantProvider** (`lib/context/tenant-context.tsx`)
   - React Context –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ–Ω–∞–Ω—Ç–∞
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç tenant –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

3. **SupabaseDatabaseProvider** (`providers/supabase-provider.ts`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `tenant_id` –∫–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `withTenantFilter()` helper

### –°–≤—è–∑—å Tenant ‚Üî Organization
- –ö–∞–∂–¥—ã–π tenant –∏–º–µ–µ—Ç `root_organization_id` - –≥–æ–ª–æ–≤–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
- –í—Å–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –æ–¥–Ω–æ–º—É tenant

## üîë –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ (RBAC)

### –†–æ–ª–∏
- **super_admin**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ
- **regulator_admin**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞
- **ministry_user**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞
- **institution_user**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—á—Ä–µ–∂–¥–µ–Ω–∏—è
- **ciso**: CISO (Chief Information Security Officer)
- **auditor**: –ê—É–¥–∏—Ç–æ—Ä

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –¢–æ–ª—å–∫–æ `super_admin`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–Ω–∞–Ω—Ç–∞**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Ç–µ–Ω–∞–Ω—Ç–∞
- **–î–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ + –≤—ã—à–µ—Å—Ç–æ—è—â–∏–µ

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

### 1. **Tenant** (–¢–µ–Ω–∞–Ω—Ç)
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ò–º–µ–µ—Ç root organization (–≥–æ–ª–æ–≤–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é)
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ tenant_id

### 2. **Organization** (–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–¥–µ—Ä–µ–≤–æ)
- –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç tenant
- –ò–º–µ–µ—Ç —Ç–∏–ø (ministry, institution, etc.)

### 3. **Requirement** (–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ)
- –ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–∏–º–æ –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º
- –ò–º–µ–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å, –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å

### 4. **Compliance** (–ö–æ–º–ø–ª–∞–µ–Ω—Å)
- –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π
- –ò–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ, –¥–µ–¥–ª–∞–π–Ω
- –°–≤—è–∑–∞–Ω —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏

### 5. **Evidence** (–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ)
- –§–∞–π–ª-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ò–º–µ–µ—Ç —Ç–∏–ø, —Å—Ç–∞—Ç—É—Å, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ Supabase Storage

### 6. **Control** (–ú–µ—Ä–∞ –∑–∞—â–∏—Ç—ã)
- –¢–∏–ø–æ–≤–∞—è –º–µ—Ä–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ò–º–µ–µ—Ç —Ç–∏–ø, —á–∞—Å—Ç–æ—Ç—É, –æ–ø–∏—Å–∞–Ω–∏–µ
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–∞ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏

### 7. **Document** (–î–æ–∫—É–º–µ–Ω—Ç)
- –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (–∑–∞–∫–æ–Ω, –ø—Ä–∏–∫–∞–∑, –ì–û–°–¢)
- –ò–º–µ–µ—Ç –≤–µ—Ä—Å–∏–∏, —Å—Ç–∞—Ç—É—Å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏
- –°–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

## üîÑ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–ª–∞–µ–Ω—Å–∞**
\`\`\`
User ‚Üí API Route ‚Üí Service ‚Üí Provider ‚Üí Database
     ‚Üê Response  ‚Üê Result  ‚Üê Data     ‚Üê Query
\`\`\`

### 2. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞**
\`\`\`
User ‚Üí Upload API ‚Üí Storage Service ‚Üí Supabase Storage
                 ‚Üí Evidence Service ‚Üí Database
\`\`\`

### 3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ tenant**
\`\`\`
API Route ‚Üí createExecutionContext(tenantId, userId, orgId)
         ‚Üí Provider.find({ filters })
         ‚Üí withTenantFilter(query, tenantId)
         ‚Üí Database (WHERE tenant_id = ?)
\`\`\`

## üé® UI/UX –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. **Breadcrumbs**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ URL
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `components/layout/page-breadcrumbs.tsx`

### 2. **Data Tables**
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- Bulk actions (–º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `components/admin/admin-data-table.tsx`

### 3. **Dialogs**
- –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä
- –§–æ—Ä–º–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
- –ü–∞—Ç—Ç–µ—Ä–Ω: `create-*-dialog.tsx`, `edit-*-dialog.tsx`

### 4. **Cards**
- –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã, badges
- –ü–∞—Ç—Ç–µ—Ä–Ω: `*-card.tsx`

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
1. **Middleware**: –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ –∏ API
2. **Next.js Config**: optimizePackageImports –¥–ª—è –±–æ–ª—å—à–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
3. **Database**: –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ tenant_id, organization_id, requirement_id
4. **Caching**: SWR –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üìù –°–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –∫–æ–¥–µ

### Naming Conventions
- **–§–∞–π–ª—ã**: kebab-case (`user-profile.tsx`)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: PascalCase (`UserProfile`)
- **–§—É–Ω–∫—Ü–∏–∏**: camelCase (`getUserProfile`)
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã**: UPPER_SNAKE_CASE (`MAX_FILE_SIZE`)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
\`\`\`tsx
// 1. Imports
import { useState } from "react"
import { Button } from "@/components/ui/button"

// 2. Types
interface Props {
  userId: string
}

// 3. Component
export function UserProfile({ userId }: Props) {
  // 3.1. Hooks
  const [loading, setLoading] = useState(false)
  
  // 3.2. Handlers
  const handleSubmit = async () => {
    // ...
  }
  
  // 3.3. Render
  return (
    <div>
      {/* ... */}
    </div>
  )
}
\`\`\`

## üîç –ü–æ–∏—Å–∫ –∫–æ–¥–∞ –¥–ª—è LLM

### –ö–∞–∫ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –∫–æ–¥?

1. **–ü–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É**:
   - –ö–æ–º–ø–ª–∞–µ–Ω—Å ‚Üí `components/compliance/`, `app/api/compliance/`
   - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è ‚Üí `components/requirements/`, `app/api/requirements/`
   - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ ‚Üí `components/organizations/`, `app/api/organizations/`

2. **–ü–æ —Ç–∏–ø—É**:
   - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Üí `components/`
   - API endpoints ‚Üí `app/api/`
   - –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö ‚Üí `types/domain/`
   - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ ‚Üí `lib/services/`
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã ‚Üí `providers/`

3. **–ü–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É**:
   - –°–æ–∑–¥–∞–Ω–∏–µ ‚Üí `create-*-dialog.tsx`, `POST /api/*/route.ts`
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí `edit-*-dialog.tsx`, `PATCH /api/*/[id]/route.ts`
   - –ü—Ä–æ—Å–º–æ—Ç—Ä ‚Üí `view-*-dialog.tsx`, `GET /api/*/[id]/route.ts`
   - –£–¥–∞–ª–µ–Ω–∏–µ ‚Üí `DELETE /api/*/[id]/route.ts`

## üêõ –û—Ç–ª–∞–¥–∫–∞

### Debug Logs
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `console.log("[v0] ...")` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
\`\`\`typescript
console.log("[v0] User context:", ctx.userId)
console.log("[v0] Tenant filter applied:", tenantId)
\`\`\`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
\`\`\`typescript
const ctx = await createExecutionContext()
console.log("[v0] ExecutionContext:", {
  tenantId: ctx.tenantId,
  userId: ctx.userId,
  organizationId: ctx.organizationId
})
\`\`\`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [MULTI_TENANT_ARCHITECTURE.md](./MULTI_TENANT_ARCHITECTURE.md) - –î–µ—Ç–∞–ª–∏ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- [COMPONENTS_INDEX.md](./COMPONENTS_INDEX.md) - –ò–Ω–¥–µ–∫—Å –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [API_INDEX.md](./API_INDEX.md) - –ò–Ω–¥–µ–∫—Å –≤—Å–µ—Ö API endpoints
