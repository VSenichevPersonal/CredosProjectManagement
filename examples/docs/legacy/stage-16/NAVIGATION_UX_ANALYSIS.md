# Критический анализ навигации и структуры меню

**Дата:** 2025-01-12  
**Анализ:** Product Owner + UI Engineer подход  
**Система:** IB Compliance Platform (Stage 14)

---

## 📊 Текущая структура меню

### Группы навигации (7 групп)

```
1. 🏠 Обзор (2 пункта)
   - Дашборд
   - Тепловая карта

2. 🎯 Планирование и контроль (7 пунктов) ⚠️ ПЕРЕГРУЖЕНО
   - План соответствия
   - Требования
   - Типовые меры защиты
   - Карта организаций
   - Риски
   - Отчеты
   - Аналитика

3. 📋 Исполнение (5 пунктов) ⚠️ ДУБЛИ
   - Моя организация
   - Мои требования
   - Мои записи соответствия
   - Меры и доказательства
   - Календарь подтверждений

4. 📁 Доказательства (2 пункта)
   - Документы
   - Типы доказательств ⚠️ Админская настройка в пользовательском разделе

5. 🔧 Администрирование (8 пунктов) ⚠️ ПЕРЕГРУЖЕНО
   - Настройки тенанта
   - Пользователи
   - Справочники
   - Правила применимости
   - Роли и права
   - Аудит
   - Управление тенантами
   - Системные настройки

6. 🛒 Маркетплейс (5 пунктов) ⚠️ НЕ РЕАЛИЗОВАНО
   - Нормативы
   - Требования
   - Меры
   - Шаблоны
   - Пакеты

7. 📖 Справка (1 пункт)
   - База знаний
```

---

## 🔴 Критические проблемы

### Проблема 1: Нет персонализации по ролям

**Сейчас:** Все видят все пункты меню (кроме superAdminOnly)

**Проблема:**
- Исполнитель видит "Планирование и контроль" - ему это не нужно
- Директор по ИБ видит "Мои требования" - у него нет личных задач
- Регулятор видит "Моя организация" - у него нет организации

**Решение:** Role-based menu filtering

### Проблема 2: Дублирование пунктов

```
Планирование и контроль:
  - План соответствия        ← Все записи
  - Требования               ← Все требования

Исполнение:
  - Мои требования           ← Дубль, просто filtered
  - Мои записи соответствия  ← Дубль, просто filtered
```

**Это создаёт путаницу!** Пользователь не понимает разницу.

### Проблема 3: Группа "Администрирование" перегружена

8 пунктов в одной группе - слишком много. Нужно разделить на подгруппы.

### Проблема 4: "Маркетплейс" не реализован

5 пунктов меню, которые никуда не ведут. Лучше скрыть до реализации.

### Проблема 5: Неочевидные названия

- "План соответствия" vs "Мои записи соответствия" - в чём разница?
- "Типовые меры защиты" - это шаблоны или реальные меры?
- "Справочники" - что там внутри?

---

## 🎯 Предлагаемая структура (Role-Based)

### Для **CISO / Директора по ИБ** (Планирование)

```
📊 МОНИТОРИНГ
  └─ Дашборд
  └─ Тепловая карта соответствия
  └─ Аналитика и тренды

📋 УПРАВЛЕНИЕ СООТВЕТСТВИЕМ
  └─ Организации (иерархия)
  └─ Требования (реестр)
  └─ Записи соответствия (все)
  └─ Меры контроля (все)

📄 НОРМАТИВНАЯ БАЗА
  └─ Нормативные акты
  └─ Требования из нормативов
  └─ Шаблоны мер защиты

📊 ОТЧЁТНОСТЬ
  └─ Отчёты по соответствию
  └─ Отчёты по организациям
  └─ Отчёты для регулятора

⚠️ РИСКИ
  └─ Реестр рисков
  └─ Матрица рисков
  └─ Планы митигации

👥 АДМИНИСТРИРОВАНИЕ
  └─ Пользователи и роли
  └─ Настройки системы
  └─ Аудит действий
```

---

### Для **Исполнителя** (Execution-focused)

```
🎯 МОИ ЗАДАЧИ
  └─ Дашборд (мои задачи)
  └─ Назначенные мне требования
  └─ Просроченные задачи (с фильтром)

✅ ВЫПОЛНЕНИЕ
  └─ Моя организация (информация)
  └─ Записи соответствия (только моя организация)
  └─ Меры к выполнению
  └─ Календарь сроков

📤 ДОКАЗАТЕЛЬСТВА
  └─ Загрузить доказательство
  └─ Мои документы
  └─ Ожидают проверки

📖 СПРАВКА
  └─ Как загрузить доказательство?
  └─ Шаблоны документов
  └─ FAQ
```

---

### Для **Регулятора / Проверяющего** (Review-focused)

```
📊 ОБЗОР СООТВЕТСТВИЯ
  └─ Дашборд (сводка по региону)
  └─ Тепловая карта
  └─ Статистика по организациям

🔍 ПРОВЕРКА
  └─ Организации для проверки
  └─ Требования для одобрения
  └─ Доказательства на проверке
  └─ История изменений

📊 ОТЧЁТНОСТЬ
  └─ Сводные отчёты
  └─ Отчёты по организациям
  └─ Экспорт данных

📋 НОРМАТИВЫ
  └─ Создать требование
  └─ Редактировать нормативы
  └─ Назначить требования организациям
```

---

### Для **Super Admin** (полный доступ)

```
🏢 МУЛЬТИТЕНАНТНОСТЬ
  └─ Управление тенантами
  └─ Переключение между тенантами
  └─ Статистика использования

👥 УПРАВЛЕНИЕ ПОЛЬЗОВАТЕЛЯМИ
  └─ Все пользователи
  └─ Роли и права (RBAC)
  └─ Создание пользователей

🔧 СИСТЕМА
  └─ Системные настройки
  └─ Справочники (глобальные)
  └─ Аудит всех действий
  └─ Мониторинг производительности

📦 КОНТЕНТ
  └─ Нормативные акты (все тенанты)
  └─ Шаблоны требований
  └─ Шаблоны мер
  └─ База знаний
```

---

## 🎨 Рекомендуемая реорганизация

### Новая структура (универсальная с role filtering)

```typescript
const navigationConfig = {
  // Группа 1: ГЛАВНОЕ (для всех)
  main: {
    name: "Главное",
    roles: ["*"],  // Для всех
    items: [
      { 
        name: "Главная", 
        href: "/", 
        icon: Home,
        showFor: ["*"]
      },
    ]
  },

  // Группа 2: МОЯ РАБОТА (персонализировано)
  myWork: {
    name: "Моя работа",
    roles: ["ciso", "institution_user", "ministry_user"],
    items: [
      { 
        name: "Мои задачи", 
        href: "/my-tasks", 
        icon: ClipboardList,
        showFor: ["institution_user", "ministry_user"],
        badge: "count:pending_tasks"  // Динамический badge с количеством
      },
      { 
        name: "Моя организация", 
        href: "/my-organization", 
        icon: Building2,
        showFor: ["ciso", "institution_user", "ministry_user"]
      },
      { 
        name: "Требования", 
        href: "/my-requirements", 
        icon: FileText,
        showFor: ["institution_user", "ministry_user"]
      },
      { 
        name: "Доказательства", 
        href: "/my-evidence", 
        icon: Files,
        showFor: ["institution_user", "ministry_user"]
      },
    ]
  },

  // Группа 3: ПЛАНИРОВАНИЕ (для CISO и выше)
  planning: {
    name: "Планирование",
    roles: ["ciso", "regulator_admin", "super_admin"],
    items: [
      { 
        name: "Тепловая карта", 
        href: "/heatmap", 
        icon: Grid3x3 
      },
      { 
        name: "Все организации", 
        href: "/organizations", 
        icon: Building2 
      },
      { 
        name: "Реестр требований", 
        href: "/requirements", 
        icon: FileText 
      },
      { 
        name: "Соответствие", 
        href: "/compliance", 
        icon: CheckSquare 
      },
    ]
  },

  // Группа 4: КОНТЕНТ И НАСТРОЙКА (для регулятора и админов)
  content: {
    name: "Нормативы и шаблоны",
    roles: ["regulator_admin", "super_admin"],
    items: [
      { 
        name: "Нормативные акты", 
        href: "/regulatory-documents", 
        icon: Scale 
      },
      { 
        name: "Шаблоны требований", 
        href: "/requirement-templates", 
        icon: FileStack 
      },
      { 
        name: "Шаблоны мер", 
        href: "/control-templates", 
        icon: Layers 
      },
      { 
        name: "Типы доказательств", 
        href: "/evidence-types", 
        icon: ListChecks 
      },
    ]
  },

  // Группа 5: ПРОВЕРКА (для регулятора)
  review: {
    name: "Проверка",
    roles: ["regulator_admin", "auditor"],
    items: [
      { 
        name: "На проверке", 
        href: "/pending-review", 
        icon: Clock,
        badge: "count:pending_review"
      },
      { 
        name: "История проверок", 
        href: "/review-history", 
        icon: FileSearch 
      },
    ]
  },

  // Группа 6: ОТЧЁТЫ (для CISO и выше)
  reports: {
    name: "Отчёты и аналитика",
    roles: ["ciso", "regulator_admin", "super_admin"],
    items: [
      { 
        name: "Сводные отчёты", 
        href: "/reports", 
        icon: FileBarChart 
      },
      { 
        name: "Аналитика", 
        href: "/analytics", 
        icon: TrendingUp 
      },
      { 
        name: "Риски", 
        href: "/risks", 
        icon: AlertTriangle 
      },
    ]
  },

  // Группа 7: АДМИНИСТРИРОВАНИЕ (разделено на подгруппы)
  admin: {
    name: "Администрирование",
    roles: ["ciso", "regulator_admin", "super_admin"],
    subgroups: [
      {
        name: "Пользователи",
        items: [
          { name: "Список пользователей", href: "/admin/users", icon: Users },
          { name: "Роли и права", href: "/admin/roles", icon: Shield },
        ]
      },
      {
        name: "Система",
        items: [
          { name: "Справочники", href: "/admin/dictionaries", icon: BookOpen },
          { name: "Настройки тенанта", href: "/admin/tenant", icon: Database },
          { name: "Аудит", href: "/admin/audit", icon: FileSearch },
        ]
      },
      {
        name: "Мультитенантность",
        showFor: ["super_admin"],
        items: [
          { name: "Тенанты", href: "/admin/tenants", icon: BuildingIcon },
          { name: "Системные настройки", href: "/admin/system", icon: Settings },
        ]
      }
    ]
  },

  // Группа 8: СПРАВКА (для всех)
  help: {
    name: "Справка",
    roles: ["*"],
    items: [
      { name: "База знаний", href: "/knowledge-base", icon: BookOpen },
      { name: "Обучение", href: "/training", icon: GraduationCap },
    ]
  }
}
```

---

## 🔴 Критические проблемы

### 1. Перегруженная группа "Планирование и контроль"

**Проблема:** 7 пунктов в одной группе

```
Планирование и контроль
  - План соответствия      ← Что это?
  - Требования             ← Какие требования?
  - Типовые меры защиты    ← Для чего?
  - Карта организаций      ← Зачем мне?
  - Риски                  ← Отдельная тема
  - Отчеты                 ← Результаты
  - Аналитика              ← Результаты
```

**Почему плохо:**
- ❌ Смешаны разные типы задач (планирование, справочники, анализ)
- ❌ Неясная иерархия важности
- ❌ Cognitive overload - слишком много выбора

**Решение:** Разделить на 3 группы:
- "Управление соответствием" (compliance, requirements, organizations)
- "Библиотека шаблонов" (templates, measures)
- "Анализ и отчётность" (reports, analytics, risks)

---

### 2. Дублирование "Мои X" и "Все X"

**Проблема:**
```
Планирование:
  - Требования             ← Все требования (для планирования)

Исполнение:
  - Мои требования         ← Filtered те же требования
```

**Почему плохо:**
- ❌ Пользователь не понимает разницу
- ❌ Два способа попасть на одну страницу
- ❌ Дублирование кода (две похожие страницы)

**Решение:** Одна страница с role-based фильтрами:

```typescript
/requirements 
  ↓
  Для CISO: Все требования с фильтрами
  Для Исполнителя: Автоматически filtered "Назначенные мне"
```

---

### 3. Админские пункты в пользовательских разделах

**Проблема:**
```
Доказательства
  - Документы                  ← Пользовательское
  - Типы доказательств         ← Админское! ⚠️
```

**Почему плохо:**
- ❌ "Типы доказательств" - это справочник (admin функция)
- ❌ Обычный пользователь не должен видеть настройки

**Решение:** Переместить в "Администрирование → Справочники"

---

### 4. Отсутствие динамических badges

**Проблема:** Нельзя быстро увидеть:
- Сколько задач требуют внимания
- Сколько доказательств на проверке
- Сколько просроченных требований

**Решение:** Добавить динамические счётчики:

```
🎯 Мои задачи  [3]    ← 3 просроченных
📋 На проверке [12]   ← 12 ожидают одобрения
```

---

### 5. Плохая группировка по User Journey

**Текущая логика:** По типу сущности (requirements, evidence, organizations)

**Лучше:** По сценарию использования (planning, execution, review, reporting)

---

## ✅ Предлагаемое решение

### Концепция: Role-Based Navigation с User Journey

```typescript
// Конфиг меню с ролями и сценариями
const navigationByRole = {
  // === ИСПОЛНИТЕЛЬ (institution_user) ===
  institution_user: [
    {
      section: "Моя работа",
      items: [
        { name: "📋 Мои задачи", href: "/my-tasks", badge: "pending_tasks" },
        { name: "📅 Календарь", href: "/my-calendar" },
        { name: "🏢 Моя организация", href: "/my-organization" },
      ]
    },
    {
      section: "Выполнение",
      items: [
        { name: "✅ Требования", href: "/requirements?assigned=me" },
        { name: "📤 Загрузить доказательство", href: "/evidence/upload", highlighted: true },
        { name: "📁 Мои документы", href: "/my-evidence" },
      ]
    },
    {
      section: "Справка",
      items: [
        { name: "📖 База знаний", href: "/knowledge-base" },
        { name: "❓ Помощь", href: "/help" },
      ]
    }
  ],

  // === CISO / Директор по ИБ ===
  ciso: [
    {
      section: "Мониторинг",
      items: [
        { name: "📊 Дашборд", href: "/" },
        { name: "🗺️ Тепловая карта", href: "/heatmap" },
        { name: "📈 Аналитика", href: "/analytics" },
      ]
    },
    {
      section: "Управление соответствием",
      items: [
        { name: "🏢 Организации", href: "/organizations" },
        { name: "📋 Требования", href: "/requirements" },
        { name: "✅ Записи соответствия", href: "/compliance" },
        { name: "🛡️ Меры контроля", href: "/controls" },
      ]
    },
    {
      section: "Нормативная база",
      items: [
        { name: "📜 Нормативные акты", href: "/regulatory-documents" },
        { name: "📑 Шаблоны требований", href: "/requirement-templates" },
        { name: "🔧 Шаблоны мер", href: "/control-templates" },
      ]
    },
    {
      section: "Риски и отчёты",
      items: [
        { name: "⚠️ Риски", href: "/risks" },
        { name: "📊 Отчёты", href: "/reports" },
      ]
    },
    {
      section: "Настройки",
      items: [
        { name: "👥 Пользователи", href: "/admin/users" },
        { name: "📚 Справочники", href: "/admin/dictionaries" },
        { name: "🔍 Аудит", href: "/admin/audit" },
      ]
    }
  ],

  // === РЕГУЛЯТОР ===
  regulator_admin: [
    {
      section: "Обзор региона",
      items: [
        { name: "📊 Дашборд региона", href: "/regulator/dashboard" },
        { name: "🗺️ Карта соответствия", href: "/heatmap" },
        { name: "📈 Статистика", href: "/regulator/stats" },
      ]
    },
    {
      section: "Проверка и одобрение",
      items: [
        { name: "⏳ На проверке", href: "/pending-review", badge: "pending_count" },
        { name: "✅ Одобренные", href: "/approved" },
        { name: "❌ Отклонённые", href: "/rejected" },
      ]
    },
    {
      section: "Управление нормативами",
      items: [
        { name: "📜 Нормативные акты", href: "/regulatory-documents" },
        { name: "📋 Требования", href: "/requirements" },
        { name: "🔧 Шаблоны мер", href: "/control-templates" },
      ]
    },
    {
      section: "Организации",
      items: [
        { name: "🏢 Все организации", href: "/organizations" },
        { name: "📊 По организациям", href: "/organization-reports" },
      ]
    }
  ],

  // === SUPER ADMIN ===
  super_admin: {
    // Все пункты + дополнительные
  }
}
```

---

## 🎨 UI/UX Improvements

### Улучшение 1: Collapsible Groups по умолчанию

**Сейчас:** Все группы раскрыты → слишком длинный sidebar

**Предлагаю:**
```typescript
// По умолчанию раскрыта только активная группа
const [expandedGroups, setExpandedGroups] = useState<Set<string>>(
  new Set([activeGroupId])  // ✅ Только активная
)

// Вместо текущего:
const [expandedGroups, setExpandedGroups] = useState<Set<string>>(
  new Set(navigationGroups.map(g => g.id))  // ❌ Все раскрыты
)
```

### Улучшение 2: Dynamic Badges

```typescript
{ 
  name: "Мои задачи", 
  href: "/my-tasks",
  badge: {
    type: "count",
    source: "/api/my-tasks/count",
    variant: "destructive",  // Красный для срочных
    threshold: 0  // Показывать, если > 0
  }
}
```

**Визуально:**
```
📋 Мои задачи  [3]      ← Красный badge
📤 На проверке [12]     ← Синий badge
```

### Улучшение 3: Quick Actions

В header добавить Quick Actions для частых операций:

```
┌─────────────────────────────────────────────────────┐
│ [Поиск...]  [+ Задача] [↑ Доказательство]  [🔔] [👤]│
└─────────────────────────────────────────────────────┘
```

**Для исполнителя:**
- [+ Задача] → Создать запись соответствия
- [↑ Доказательство] → Быстрая загрузка

**Для CISO:**
- [+ Требование] → Создать требование
- [+ Организация] → Добавить организацию

### Улучшение 4: Contextual Sidebar

**Идея:** Sidebar меняется в зависимости от текущей страницы

```
На странице /requirements:
  Sidebar показывает:
  - Фильтры (по критичности, регулятору)
  - Быстрые действия (создать, импорт)
  - Статистика (всего, активных)
```

---

## 📱 Адаптивность

### Desktop (текущий)
```
┌──────────┬─────────────────────┐
│ Sidebar  │ Content             │
│ (fixed)  │                     │
│          │                     │
│          │                     │
└──────────┴─────────────────────┘
```

### Tablet
```
┌────┬──────────────────────────┐
│ 📂 │ Content                  │
│    │                          │
└────┴──────────────────────────┘
     ↓ Клик
┌──────────────────────┐
│ Drawer Sidebar       │
│ (overlay)            │
└──────────────────────┘
```

### Mobile
```
┌──────────────────────────┐
│ ☰                    [🔔]│
│ Content                  │
│                          │
└──────────────────────────┘
     ↓ Клик на ☰
Bottom Sheet с меню
```

---

## 🎯 Приоритеты реализации

### Phase 1: Critical (Must Have) - 1 неделя

**1.1 Role-based filtering**
- [ ] Показывать только релевантные пункты для каждой роли
- [ ] Убрать дубликаты ("Мои X" vs "Все X")
- [ ] Скрыть "Маркетплейс" (не реализован)

**1.2 Реорганизация групп**
- [ ] Разделить "Планирование и контроль" на 2-3 группы
- [ ] Переместить "Типы доказательств" в админку
- [ ] Создать чёткую группу "Моя работа" для исполнителей

**1.3 Collapsible по умолчанию**
- [ ] Раскрыта только активная группа
- [ ] Остальные свёрнуты

### Phase 2: Important (Should Have) - 2 недели

**2.1 Dynamic badges**
- [ ] Счётчик задач для "Мои задачи"
- [ ] Счётчик на проверке для регулятора
- [ ] Счётчик просроченных

**2.2 Quick Actions**
- [ ] Кнопка "Загрузить доказательство" в header (для исполнителя)
- [ ] Кнопка "Создать требование" (для регулятора)
- [ ] Кнопка "Назначить задачу" (для CISO)

**2.3 Personalized Dashboard**
- [ ] Разные дашборды для разных ролей
- [ ] Исполнитель видит свои задачи сразу
- [ ] CISO видит сводку по организациям

### Phase 3: Nice to Have - 3 недели

**3.1 Contextual Sidebar**
- [ ] Фильтры и быстрые действия в sidebar
- [ ] Динамическая статистика

**3.2 Adaptive Navigation**
- [ ] Collapsed sidebar с иконками
- [ ] Mobile-friendly navigation
- [ ] Bottom navigation для мобильных

**3.3 Smart Features**
- [ ] Recently viewed pages
- [ ] Favorite pages (закрепить)
- [ ] Search in navigation

---

## 🎨 Mockup новой структуры

### Для Исполнителя (простая навигация)

```
┌─────────────────────────────┐
│ 🎯 МОЯ РАБОТА              │
│   📋 Мои задачи  [3]       │
│   📅 Календарь             │
│   🏢 Моя организация       │
├─────────────────────────────┤
│ 📤 ВЫПОЛНЕНИЕ              │
│   ✅ Требования            │
│   📁 Доказательства        │
│   📊 Мой прогресс          │
├─────────────────────────────┤
│ 📖 СПРАВКА                 │
│   📚 База знаний           │
│   ❓ Помощь                │
└─────────────────────────────┘

Всего: 3 группы, 9 пунктов
Простая, понятная структура!
```

### Для CISO (полная функциональность)

```
┌─────────────────────────────┐
│ 📊 МОНИТОРИНГ              │
│   🏠 Дашборд               │
│   🗺️ Тепловая карта        │
│   📈 Аналитика             │
├─────────────────────────────┤
│ 🎯 СООТВЕТСТВИЕ            │
│   🏢 Организации           │
│   📋 Требования            │
│   ✅ Записи соответствия   │
│   🛡️ Меры контроля         │
├─────────────────────────────┤
│ 📚 БИБЛИОТЕКА              │
│   📜 Нормативные акты      │
│   🔧 Шаблоны мер           │
│   📑 Шаблоны требований    │
├─────────────────────────────┤
│ 📊 АНАЛИЗ                  │
│   ⚠️ Риски                 │
│   📄 Отчёты                │
│   📊 Статистика            │
├─────────────────────────────┤
│ 🔧 НАСТРОЙКИ               │
│   👥 Пользователи          │
│   📚 Справочники           │
│   🔍 Аудит                 │
└─────────────────────────────┘

Всего: 5 групп, 18 пунктов
Логичная группировка по задачам!
```

### Для Регулятора (проверка и надзор)

```
┌─────────────────────────────┐
│ 📊 ОБЗОР РЕГИОНА           │
│   🏠 Дашборд               │
│   🗺️ Карта соответствия    │
│   📈 Статистика            │
├─────────────────────────────┤
│ ✅ ПРОВЕРКА                │
│   ⏳ На проверке  [12]     │
│   ✅ Одобренные            │
│   ❌ Отклонённые           │
├─────────────────────────────┤
│ 🏢 ОРГАНИЗАЦИИ             │
│   📋 Все организации       │
│   📊 По организациям       │
│   📄 Отчёты                │
├─────────────────────────────┤
│ 📚 НОРМАТИВЫ               │
│   📜 Нормативные акты      │
│   📋 Требования            │
│   🔧 Шаблоны мер           │
├─────────────────────────────┤
│ 🔧 УПРАВЛЕНИЕ              │
│   📚 Справочники           │
│   🔍 Аудит                 │
└─────────────────────────────┘

Всего: 5 групп, 14 пунктов
Фокус на проверке и надзоре!
```

---

## 💡 Конкретные рекомендации

### Улучшение навигации (Quick Wins)

#### 1. Переименовать пункты меню

**Было → Стало:**
- "План соответствия" → "Записи соответствия" (понятнее)
- "Типовые меры защиты" → "Шаблоны мер" (короче и понятнее)
- "Карта организаций" → "Организации" (короче)
- "Мои записи соответствия" → Убрать (дубль)
- "Меры и доказательства" → Убрать (непонятно)

#### 2. Перегруппировать

**Было:** 7 групп, 30 пунктов

**Стало:**
```
Для исполнителя: 3 группы, 9 пунктов   ← Упрощено!
Для CISO: 5 групп, 18 пунктов          ← Структурировано!
Для регулятора: 5 групп, 14 пунктов   ← Целевое!
```

#### 3. Добавить динамические badges

```typescript
// API endpoint для badges
GET /api/navigation/badges
{
  pending_tasks: 3,
  pending_review: 12,
  overdue: 5,
  new_requirements: 2
}

// В компоненте:
{badge && <Badge variant="destructive">{badgeCount}</Badge>}
```

---

## 📊 Сравнение подходов

### Подход 1: Entity-based (текущий) ❌

```
Группировка по типу данных:
- Requirements
- Compliance
- Evidence
- Organizations

Проблемы:
❌ Непонятно, с чего начать
❌ Нет фокуса на задачи пользователя
❌ Дублирование (Все X vs Мои X)
```

### Подход 2: Role-based (рекомендуется) ✅

```
Группировка по роли и задачам:
- Для исполнителя: Моя работа → Выполнение → Справка
- Для CISO: Мониторинг → Управление → Анализ → Настройки
- Для регулятора: Обзор → Проверка → Нормативы

Преимущества:
✅ Персонализация под роль
✅ Фокус на User Journey
✅ Меньше cognitive load
✅ Быстрее найти нужное
```

---

## 🚀 Implementation Plan

### Шаг 1: Создать navigationConfig с ролями

```typescript
// lib/navigation/navigation-config.ts
export const navigationConfig = {
  institution_user: [...],
  ciso: [...],
  regulator_admin: [...],
  super_admin: [...]
}

export function getNavigationForRole(role: string) {
  return navigationConfig[role] || navigationConfig.institution_user
}
```

### Шаг 2: Обновить AppSidebar

```typescript
// components/layout/app-sidebar.tsx
export function AppSidebar({ userRole }: { userRole: string }) {
  const navigation = getNavigationForRole(userRole)
  
  return (
    <aside>
      {navigation.map(group => (
        <NavigationGroup key={group.section} {...group} />
      ))}
    </aside>
  )
}
```

### Шаг 3: Добавить Badge API

```typescript
// app/api/navigation/badges/route.ts
export async function GET(request: NextRequest) {
  const ctx = await createExecutionContext(request)
  
  const badges = {
    pending_tasks: await getPendingTasksCount(ctx),
    pending_review: await getPendingReviewCount(ctx),
    overdue: await getOverdueCount(ctx)
  }
  
  return Response.json(badges)
}
```

---

## 🎯 Хотите, чтобы я реализовал?

**Варианты:**

1. **Quick Fix (2 часа):**
   - Переименовать пункты
   - Убрать дубликаты
   - Скрыть Маркетплейс
   - Collapsible по умолчанию

2. **Medium (1 день):**
   - Quick Fix +
   - Role-based filtering
   - Реорганизация групп

3. **Full Redesign (3 дня):**
   - Полная role-based navigation
   - Dynamic badges
   - Quick actions
   - Персонализированные дашборды

**Что выбираем?** 😊
