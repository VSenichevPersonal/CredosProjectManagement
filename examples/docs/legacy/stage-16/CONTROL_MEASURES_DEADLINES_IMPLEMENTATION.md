# –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—è

**Stage:** 16  
**–î–∞—Ç–∞:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—è

---

## üéØ –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ä–æ–∫–æ–≤ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–ª—è:
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –º–µ—Ä
- –ö–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ—Å—Ä–æ—á–µ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –ò–ë-–∫–æ–º–ø–ª–∞–µ–Ω—Å–∞ (–ö–ò–ò, –ü–î–Ω, –ì–ò–°)

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª:** `scripts/600_add_control_measure_deadlines.sql`

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `control_templates`:
```sql
- estimated_implementation_days INTEGER  -- –ü—Ä–∏–º–µ—Ä–Ω—ã–π —Å—Ä–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (30, 60, 90 –¥–Ω–µ–π)
- validity_period_months INTEGER         -- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –º–µ—Ä—ã (12, 24, 36 –º–µ—Å—è—Ü–µ–≤)
```

#### –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `control_measures`:
```sql
- target_implementation_date DATE        -- –ü–õ–ê–ù–û–í–ê–Ø –¥–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- actual_implementation_date DATE        -- –§–ê–ö–¢–ò–ß–ï–°–ö–ê–Ø –¥–∞—Ç–∞ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –∏–∑ implementation_date)
- next_review_date DATE                  -- –°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- valid_until DATE                       -- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –º–µ—Ä—ã
- days_until_due INTEGER                 -- –î–Ω–µ–π –¥–æ —Å—Ä–æ–∫–∞ (—Ä–∞—Å—á–µ—Ç–Ω–æ–µ)
- is_overdue BOOLEAN                     -- –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ –ª–∏ (—Ä–∞—Å—á–µ—Ç–Ω–æ–µ)
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–∏–≥–≥–µ—Ä:
```sql
CREATE FUNCTION update_control_measure_dates()
```

**–õ–æ–≥–∏–∫–∞:**
1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ä—ã:
   - –ë–µ—Ä–µ—Ç `deadline` –∏–∑ requirement (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ò–ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç: NOW() + `estimated_implementation_days`
   
2. –ü—Ä–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–∏ (`status = 'implemented'`):
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `actual_implementation_date = NOW()`
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç `valid_until` –∏–∑ `validity_period_months`
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç `next_review_date` –∏–∑ `frequency` —à–∞–±–ª–æ–Ω–∞

3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç:
   - `days_until_due` = —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É target_date –∏ NOW()
   - `is_overdue` = –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ –ª–∏ –º–µ—Ä–∞

---

### 2. TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª—ã:**
- `types/domain/control-template.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω
- `types/domain/control-measure.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ControlTemplate
```typescript
interface ControlTemplate {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  
  // ‚ûï –ù–æ–≤—ã–µ –ø–æ–ª—è
  estimatedImplementationDays: number | null
  validityPeriodMonths: number | null
}
```

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ControlMeasure
```typescript
interface ControlMeasure {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  
  // ‚ûï –ù–æ–≤—ã–µ –ø–æ–ª—è
  targetImplementationDate?: Date      // –ü–ª–∞–Ω–æ–≤–∞—è
  actualImplementationDate?: Date      // –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è
  nextReviewDate?: Date                // –°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
  validUntil?: Date                    // –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
  daysUntilDue?: number                // –î–Ω–µ–π –¥–æ —Å—Ä–æ–∫–∞
  isOverdue: boolean                   // –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ –ª–∏
}
```

---

### 3. –£—Ç–∏–ª–∏—Ç—ã

**–§–∞–π–ª:** `lib/utils/control-measure-utils.ts`

#### –§—É–Ω–∫—Ü–∏–∏:
- `calculateDeadlineInfo()` - —Ä–∞—Å—á–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ä–æ–∫–∞—Ö
- `formatMeasureDate()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç
- `getMeasureStatusColor()` - —Ü–≤–µ—Ç —Å—Ç–∞—Ç—É—Å–∞
- `getMeasureStatusLabel()` - —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- `needsReview()` - –Ω—É–∂–Ω–∞ –ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞
- `isExpiring()` - –∏—Å—Ç–µ–∫–∞–µ—Ç –ª–∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è

---

### 4. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### –§–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
**–§–∞–π–ª—ã:**
- `components/control-templates/create-control-template-dialog.tsx`
- `components/control-templates/edit-control-template-dialog.tsx`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:**
```tsx
<Input
  label="–°—Ä–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–¥–Ω–µ–π)"
  type="number"
  placeholder="30, 60, 90..."
/>

<Input
  label="–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–º–µ—Å—è—Ü–µ–≤)"
  type="number"
  placeholder="12, 24, 36..."
/>
```

#### –ö–∞—Ä—Ç–æ—á–∫–∞ —à–∞–±–ª–æ–Ω–∞
**–§–∞–π–ª:** `components/control-templates/control-template-card.tsx`

**–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
- –°—Ä–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è: ~60 –¥–Ω–µ–π
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 12 –º–µ—Å

#### –ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞
**–§–∞–π–ª:** `components/control-templates/view-control-template-dialog.tsx`

**–†–∞—Å—à–∏—Ä–µ–Ω –±–ª–æ–∫–æ–º:**
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
- –ü–æ—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ö–∞—Ä—Ç–æ—á–∫–∞ –º–µ—Ä—ã –∫–æ–Ω—Ç—Ä–æ–ª—è
**–§–∞–π–ª:** `components/compliance/control-measure-card.tsx` ‚≠ê **–ù–û–í–´–ô**

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Å—Ä–æ—á–∫–∏ (–∫—Ä–∞—Å–Ω—ã–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π/–∂–µ–ª—Ç—ã–π/–∑–µ–ª–µ–Ω—ã–π)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤–æ–≥–æ —Å—Ä–æ–∫–∞
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Å—Ä–æ—á–∫–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–Ω–µ–π
- –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–∞—Ç–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- –°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (—Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏)
- –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ –∑–∞–º–µ—Ç–∫–∏

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ö–ò–ò - –ö–∞—Ç–µ–≥–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
{
  code: "KII-CAT-001",
  title: "–ö–∞—Ç–µ–≥–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –ö–ò–ò",
  estimatedImplementationDays: 180,  // 6 –º–µ—Å—è—Ü–µ–≤ –ø–æ 187-–§–ó
  validityPeriodMonths: 60,          // –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–∑ –≤ 5 –ª–µ—Ç
  frequency: "annually"
}

// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ä—ã –¥–ª—è requirement —Å deadline
requirement.deadline = "2025-06-01"
// ‚Üì –¢—Ä–∏–≥–≥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç
measure.target_implementation_date = "2025-06-01"

// –ü—Ä–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–∏
measure.status = "implemented"
// ‚Üì –¢—Ä–∏–≥–≥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç
measure.actual_implementation_date = "2025-05-15"
measure.valid_until = "2030-05-15"  // +60 –º–µ—Å—è—Ü–µ–≤
measure.next_review_date = "2026-05-15"  // +1 –≥–æ–¥ (annually)
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–î–Ω - –û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–µ—Ä
```typescript
// –®–∞–±–ª–æ–Ω
{
  code: "PDN-ASSESS-001",
  title: "–û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–µ—Ä –∑–∞—â–∏—Ç—ã –ü–î–Ω",
  estimatedImplementationDays: 30,
  validityPeriodMonths: 12,  // –ï–∂–µ–≥–æ–¥–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
  frequency: "annually"
}

// –ú–µ—Ä–∞ –±–µ–∑ requirement.deadline
// ‚Üì –¢—Ä–∏–≥–≥–µ—Ä —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
measure.target_implementation_date = NOW() + 30 –¥–Ω–µ–π
```

---

## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

| –°—Ç–∞—Ç—É—Å | –¶–≤–µ—Ç | –£—Å–ª–æ–≤–∏–µ |
|--------|------|---------|
| üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ | –ö—Ä–∞—Å–Ω—ã–π | –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ |
| üü† –ö—Ä–∏—Ç–∏—á–Ω–æ | –û—Ä–∞–Ω–∂–µ–≤—ã–π | ‚â§ 3 –¥–Ω–µ–π –¥–æ —Å—Ä–æ–∫–∞ |
| üü° –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ | –ñ–µ–ª—Ç—ã–π | ‚â§ 14 –¥–Ω–µ–π –¥–æ —Å—Ä–æ–∫–∞ |
| üü¢ –í —Å—Ä–æ–∫ | –ó–µ–ª–µ–Ω—ã–π | –í–Ω–µ–¥—Ä–µ–Ω–∞/–ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ |
| ‚ö™ –û–±—ã—á–Ω–æ | –°–µ—Ä—ã–π | > 14 –¥–Ω–µ–π –¥–æ —Å—Ä–æ–∫–∞ |

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

**–ü—Ä–æ—Å—Ä–æ—á–∫–∞:**
```
‚ö†Ô∏è –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞ 15 –¥–Ω–µ–π
```

**–ö—Ä–∏—Ç–∏—á–Ω–æ:**
```
‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–æ! –û—Å—Ç–∞–ª–æ—Å—å 2 –¥–Ω.
```

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**
```
–î–æ —Å—Ä–æ–∫–∞ 10 –¥–Ω.
```

**–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```
üìÖ –°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: 15.11.2025
```

**–ò—Å—Ç–µ–∫–∞–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:**
```
‚ö†Ô∏è –ò—Å—Ç–µ–∫–∞–µ—Ç –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π
```

---

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ú–∏–≥—Ä–∞—Ü–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```sql
-- –î–ª—è —à–∞–±–ª–æ–Ω–æ–≤
UPDATE control_templates
SET estimated_implementation_days = 
  CASE frequency
    WHEN 'daily', 'weekly' THEN 7
    WHEN 'monthly' THEN 30
    WHEN 'quarterly' THEN 90
    WHEN 'annually' THEN 180
    ELSE 30
  END;

UPDATE control_templates
SET validity_period_months = 
  CASE frequency
    WHEN 'daily', 'weekly', 'monthly', 'quarterly' THEN 12
    WHEN 'annually' THEN 24
    ELSE 12
  END;
```

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º –∫–æ–º–ø–ª–∞–µ–Ω—Å–æ–º

### ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:

1. **187-–§–ó (–ö–ò–ò)**
   - –ë–µ—Ä–µ—Ç deadline –∏–∑ requirement
   - –î–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è: 6 –º–µ—Å—è—Ü–µ–≤
   - –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è: 5 –ª–µ—Ç

2. **152-–§–ó (–ü–î–Ω)**
   - –û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: –µ–∂–µ–≥–æ–¥–Ω–æ
   - –ú–æ–¥–µ–ª—å —É–≥—Ä–æ–∑: –µ–∂–µ–≥–æ–¥–Ω–∞—è –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è
   - –£–ó-1, –£–ó-2: 12 –º–µ—Å—è—Ü–µ–≤
   - –£–ó-3: 24 –º–µ—Å—è—Ü–∞

3. **–§–°–¢–≠–ö (–ü—Ä–∏–∫–∞–∑—ã ‚Ññ17, ‚Ññ21)**
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –†–∞–∑–Ω—ã–µ —Å—Ä–æ–∫–∏ –ø–æ –∫–ª–∞—Å—Å–∞–º –∑–∞—â–∏—Ç—ã

### üéØ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:

1. Requirement —Å–æ–¥–µ—Ä–∂–∏—Ç:
   - `deadline` - —Å—Ä–æ–∫ –∏–∑ –ù–ü–ê
   - `periodicity` - –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å
   - `regulator` - –§–°–¢–≠–ö, –†–æ—Å–∫–æ–º–Ω–∞–¥–∑–æ—Ä –∏ —Ç.–¥.

2. Control Template –¥–æ–±–∞–≤–ª—è–µ—Ç:
   - `estimated_implementation_days` - –ø—Ä–∏–º–µ—Ä–Ω—ã–π —Å—Ä–æ–∫
   - `validity_period_months` - —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è

3. Control Measure –ø–æ–ª—É—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - `target_implementation_date` –∏–∑ requirement.deadline
   - –ò–ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ—Ç NOW()

**–ù–ï–¢ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö!** –í—Å—ë –ø—Ä–∏–≤—è–∑–∞–Ω–æ —á–µ—Ä–µ–∑ requirement_id.

---

## üìã –ß—Ç–æ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ)

‚ùå –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–æ–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –ö–ò–ò/–ü–î–Ω –≤ —à–∞–±–ª–æ–Ω–µ  
‚ùå –ü–æ–ª–µ `legislative_deadline` vs `internal_target_date`  
‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —à—Ç—Ä–∞—Ñ–æ–≤  
‚ùå –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞  

**–ü—Ä–∏—á–∏–Ω–∞:** –£–ø—Ä–æ—â–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏. –í—Å–µ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É–∂–µ –≤ `requirements`.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –º–µ—Ä—É –∏–∑ —à–∞–±–ª–æ–Ω–∞ –¥–ª—è requirement —Å deadline
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å –º–µ—Ä—É –∏–∑ —à–∞–±–ª–æ–Ω–∞ –¥–ª—è requirement –±–µ–∑ deadline
4. ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å –º–µ—Ä—É (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –¥–∞—Ç)
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–∫–∏
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞)

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:

```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –º–µ—Ä
SELECT COUNT(*) FROM control_measures WHERE is_overdue = true;

-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö (< 3 –¥–Ω–µ–π)
SELECT COUNT(*) FROM control_measures 
WHERE days_until_due <= 3 AND days_until_due >= 0
  AND status IN ('planned', 'in_progress');

-- –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Å—Ä–æ–∫
SELECT 
  COUNT(*) FILTER (WHERE NOT is_overdue) * 100.0 / COUNT(*)
FROM control_measures
WHERE status IN ('implemented', 'verified');

-- –ú–µ—Ä—ã —Ç—Ä–µ–±—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
SELECT COUNT(*) FROM control_measures
WHERE next_review_date <= CURRENT_DATE + INTERVAL '14 days'
  AND status IN ('implemented', 'verified');
```

---

## üîÆ Roadmap (—Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã)

### Stage 17 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- üìä –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø–æ —Å—Ä–æ–∫–∞–º
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–∏–±–ª–∏–∂–∞—é—â–∏—Ö—Å—è —Å—Ä–æ–∫–∞—Ö
- üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Å—Ä–æ–∫
- üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—è

### Stage 18 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ Telegram/Email
- üìë –û—Ç—á–µ—Ç—ã –¥–ª—è —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–≤ —Å –¥–∞—Ç–∞–º–∏
- üîÑ –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤

---

## ‚úÖ Checklist –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [x] SQL –º–∏–≥—Ä–∞—Ü–∏—è 600
- [x] TypeScript —Ç–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [x] –£—Ç–∏–ª–∏—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
- [x] UI —Ñ–æ—Ä–º—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [x] UI –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ControlMeasureCard —Å–æ–∑–¥–∞–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ dev
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ prod
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–±—É—á–µ–Ω—ã

---

## üéì –î–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω:

```typescript
// 1. –í —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞
estimatedImplementationDays: 60,     // –ü—Ä–∏–º–µ—Ä–Ω–æ 2 –º–µ—Å—è—Ü–∞
validityPeriodMonths: 12,            // –î–µ–π—Å—Ç–≤—É–µ—Ç –≥–æ–¥

// 2. –¢—Ä–∏–≥–≥–µ—Ä —Å–¥–µ–ª–∞–µ—Ç –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ä—ã
```

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã:

```typescript
import { 
  calculateDeadlineInfo, 
  formatMeasureDate 
} from '@/lib/utils/control-measure-utils'

const deadlineInfo = calculateDeadlineInfo(
  measure.targetImplementationDate, 
  measure.status
)

if (deadlineInfo?.isOverdue) {
  // –ü–æ–∫–∞–∑–∞—Ç—å –∫—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
}
```

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

–ü—Ä–æ—Å—Ç–∞—è, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –±–µ–∑ –ø–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∏—è, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞—é—â–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –ò–ë-–∫–æ–º–ø–ª–∞–µ–Ω—Å–∞.

