# Stage 16: –ó–ê–í–ï–†–®–ï–ù–û ‚úÖ

**–î–∞—Ç–∞:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üéØ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 1Ô∏è‚É£ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—è**

#### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ **600**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `control_templates` –∏ `control_measures`
- ‚úÖ **601**: –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã (8 —à–∞–±–ª–æ–Ω–æ–≤)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- ‚úÖ –ü–ª–∞–Ω–æ–≤—ã–µ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ä–æ–∫–æ–≤ —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä—ã
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Å—Ä–æ—á–µ–∫ (üî¥üü†üü°üü¢)
- ‚úÖ –°–ª–µ–¥—É—é—â–∏–µ –¥–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫
- ‚úÖ –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –º–µ—Ä

#### UI:
- ‚úÖ –§–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ `ControlMeasureCard` —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π —Å—Ä–æ–∫–æ–≤
- ‚úÖ –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 2Ô∏è‚É£ **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**

#### –ú–∏–≥—Ä–∞—Ü–∏—è:
- ‚úÖ **610**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `evidence`

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- ‚úÖ lifecycle_status (draft, active, archived, destroyed)
- ‚úÖ –†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–æ–º–µ—Ä, –¥–∞—Ç–∞)
- ‚úÖ –ü–µ—Ä–∏–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è (effective_from, effective_until)
- ‚úÖ –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è (retention_period_years)
- ‚úÖ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (approved_by, approved_at)

---

### 3Ô∏è‚É£ **–°–∏—Å—Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞** ‚≠ê –ì–õ–ê–í–ù–û–ï

#### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ **620**: –°–æ–∑–¥–∞–Ω—ã `document_types` (14 —Ç–∏–ø–æ–≤) –∏ `documents`
- ‚úÖ **621**: –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ `evidence`
- ‚úÖ **622**: –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `requirement_document_templates`
- ‚úÖ **623**: –°–æ–∑–¥–∞–Ω workflow —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (`document_approvals`)

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
documents (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
‚îú‚îÄ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–º–ø–ª–∞–µ–Ω—Å–∞
‚îú‚îÄ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ document_versions
‚îú‚îÄ –£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ document_approvals
‚îî‚îÄ –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ evidence

evidence (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
‚îú‚îÄ file_url (—Ñ–∞–π–ª—ã) –ò–õ–ò
‚îî‚îÄ document_id (—Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç) ‚≠ê
```

#### –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (14 —à—Ç):
- policy-ib, policy-pdn, policy-kii
- order-appoint, order-commission
- kii-act, incident-report, audit-report
- threat-model, instruction, regulation
- journal, certificate, contract

#### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è lifecycle
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ä–æ–∫–∏ –∏–∑ document_type
- ‚úÖ Workflow —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å —ç—Ç–∞–ø–∞–º–∏
- ‚úÖ Constraint: file XOR document

---

### 4Ô∏è‚É£ **TypeScript –∏ Services**

#### –¢–∏–ø—ã:
- ‚úÖ `types/domain/document-type.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `types/domain/document.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω - –ù–ï extends Evidence!)
- ‚úÖ `types/domain/evidence.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω - –¥–æ–±–∞–≤–ª–µ–Ω documentId)
- ‚úÖ `types/domain/control-template.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è)
- ‚úÖ `types/domain/control-measure.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è)
- ‚úÖ `types/dto/document-dto.ts` (–Ω–æ–≤—ã–π)

#### Services:
- ‚úÖ `lib/services/document-type-service.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `services/document-recommendation-service.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `lib/utils/control-measure-utils.ts` (–Ω–æ–≤—ã–π)

#### API:
- ‚úÖ `/api/document-types` (GET, POST)
- ‚úÖ `/api/documents/create-with-evidence` (POST)
- ‚úÖ `/api/compliance-records/[id]/auto-create-documents` (POST)

---

### 5Ô∏è‚É£ **UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

#### –ì–æ—Ç–æ–≤—ã–µ:
- ‚úÖ `components/evidence/evidence-source-selector.tsx` (–Ω–æ–≤—ã–π)
- ‚úÖ `components/documents/document-selector.tsx` (–Ω–æ–≤—ã–π)
- ‚úÖ `components/compliance/control-measure-card.tsx` (–Ω–æ–≤—ã–π)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–æ—Ä–º—ã control_templates
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–∞—Ä—Ç–æ—á–∫–∏ control_templates

#### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (TODO):
- ‚è≥ CreateDocumentWizard
- ‚è≥ DocumentsLibrary (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è)
- ‚è≥ Enhanced evidence cards with documents

---

### 6Ô∏è‚É£ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤**

- ‚úÖ React Hooks –ø–æ—Ä—è–¥–æ–∫ –≤ RequirementEvidenceTypesTab
- ‚úÖ evidenceTypeId –º–∞–ø–ø–∏–Ω–≥ –≤ EvidenceMapper

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

**SQL –ú–∏–≥—Ä–∞—Ü–∏–π:** 7  
**TypeScript —Ñ–∞–π–ª–æ–≤:** 10+  
**–ù–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** 5  
**–°–µ—Ä–≤–∏—Å–æ–≤:** 3  
**API endpoints:** 5+  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 6 —Ñ–∞–π–ª–æ–≤ (5000+ —Å—Ç—Ä–æ–∫!)  
**–ö–æ–º–º–∏—Ç–æ–≤:** 15+  

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
```sql
‚úÖ document_types (14 —Ç–∏–ø–æ–≤)
‚úÖ documents (—Å–∏—Å—Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞)
‚úÖ requirement_document_templates (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
‚úÖ document_approvals (workflow)
‚úÖ document_approval_steps (—ç—Ç–∞–ø—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
```sql
‚úÖ control_templates (+2 –ø–æ–ª—è: estimated_implementation_days, validity_period_months)
‚úÖ control_measures (+6 –ø–æ–ª–µ–π: target/actual dates, next_review, valid_until, etc)
‚úÖ evidence (+1 –ø–æ–ª–µ: document_id, -5 –ø–æ–ª–µ–π: is_document, current_version_id, etc)
```

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### –î–ª—è –º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª—è:
- üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- ‚è±Ô∏è –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–∫
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–≤–µ—Ä–æ–∫
- üé® –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

### –î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
- üìã –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (14 —Ç–∏–ø–æ–≤)
- üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (draft ‚Üí active ‚Üí archived)
- ‚úÖ Workflow —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- üìÜ –°—Ä–æ–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ì–û–°–¢ –† 7.0.8-2013)
- üá∑üá∫ –†–æ—Å—Å–∏–π—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (–Ω–æ–º–µ—Ä, –¥–∞—Ç–∞)

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- üîó –î–æ–∫—É–º–µ–Ω—Ç—ã ‚Üî –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (—á–µ—Ä–µ–∑ document_id)
- üìö –û–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç = –º–Ω–æ–≥–æ evidence
- üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- ü§ñ AI-ready –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

1. **CONTROL_MEASURES_TAXONOMY.md** - –ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –º–µ—Ä
2. **CONTROL_MEASURES_DEADLINES_IMPLEMENTATION.md** - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. **DOCUMENT_LIFECYCLE_QUICKREF.md** - –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
4. **DOCUMENT_MANAGEMENT_ARCHITECTURE.md** - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (789 —Å—Ç—Ä–æ–∫)
5. **DOCUMENT_SYSTEM_BLUEPRINT.md** - Blueprint (878 —Å—Ç—Ä–æ–∫)
6. **DOCUMENTS_VS_EVIDENCE_CLEAN_ARCHITECTURE.md** - –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
7. **DOCUMENT_CREATION_FLOWS.md** - User flows
8. **ARCHITECTURE_DECISION_RECORD.md** - ADR —Å —Ä–µ—à–µ–Ω–∏—è–º–∏
9. **MASTER_PLAN_DOCUMENT_SYSTEM.md** - Master plan
10. **KNOWN_ISSUES.md** - –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ò—Ç–æ–≥–æ:** ~5000 —Å—Ç—Ä–æ–∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏!

---

## üöÄ –ß–¢–û –î–ê–õ–¨–®–ï

### –û—Å—Ç–∞–ª–æ—Å—å –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Stage 16:

1. ‚è≥ –î–æ–¥–µ–ª–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (2-3 –¥–Ω—è):
   - CreateDocumentWizard
   - DocumentsLibrary
   - Enhanced evidence cards

2. ‚è≥ Providers/Mappers –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü:
   - DocumentTypeRepository
   - DocumentRepository (–æ–±–Ω–æ–≤–∏—Ç—å)
   - Mappers

3. ‚è≥ –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìà –ì–û–¢–û–í–ù–û–°–¢–¨

**Backend:** 90% ‚úÖ  
**–ú–∏–≥—Ä–∞—Ü–∏–∏:** 100% ‚úÖ  
**–¢–∏–ø—ã:** 100% ‚úÖ  
**Services:** 80% ‚úÖ  
**API:** 70% ‚úÖ  
**UI:** 40% ‚è≥  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 100% ‚úÖ  

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å Stage 16:** ~75%

---

## ‚ú® –î–û–°–¢–ò–ñ–ï–ù–ò–Ø

‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (documents vs evidence)  
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Drata/Vanta best practices  
‚úÖ –†–æ—Å—Å–∏–π—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ —É—á—Ç–µ–Ω–∞  
‚úÖ AI-ready (–ª—É—á—à–µ —á–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã!)  
‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –º–æ–¥–µ–ª—å  
‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  

**Stage 16 - –º–æ—â–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–∞ –ò–ë-–∫–æ–º–ø–ª–∞–µ–Ω—Å–∞!** üèóÔ∏è

---

**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏?** üé®

